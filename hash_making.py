#!/usr/bin/env python
'''
This script will make hash SHA 256 of the copied file and write it to hash.txt.
It will make an os.walk in the file-folder directory recursively and make hash
of all files inside that folder(file-folder), where the file is copied.
'''
import os           #importing os
import hashlib      #this library help us to make hash


def hashing(path):                                              #this function will make hash
    f=open(path+"/hash.txt","w")                                      #this will open hash.txt
    path1 = path+'/file-folder'
    os.chdir(path1)                                              #change the directory to the projrct folder
    contends=os.listdir(os.curdir)                              #it will list the files and folders in contends
    len_contends=len(contends)                                  #it will tell the length of list
    BLOCKSIZE=65536
    hasher=hashlib.sha256()                                     #calling the method sha256 of hashlib library

    if len_contends != 0:                                       #if something present in file folder it will make hash of it
        for root, dirs, files in os.walk(path1, topdown=True):   #we will recursively travel in the folder for all files and folders
            for name in files:
                if not name.startswith('.'):
                    with open(os.path.join(root,name),'rb') as afile:
                        buf=afile.read(BLOCKSIZE)
                        while len(buf)>0:                           #making hash of file in blocks of size 65536
                            hasher.update(buf)
                            buf=afile.read(BLOCKSIZE)
                    f.write(hasher.hexdigest()+"\n")                #this will write the hash in hash.txt
    else:
        print "main folder is empty"                            #this will print if the file-folder is empty where the file get copied
        exit()                                                  #and exit the function
    f.close()                                                   #closing the file
    return ()





